#!/bin/bash
# Display random historical event that occured today
cache='/tmp/wikiday'
date=$(date +%B_%d)
if [ ! -f ${cache} ] || [[ $(head -n1 ${cache}) != ${date} ]]; then
	events=$(w3m -no-cookie -cols 9999 -dump http://en.wikipedia.org/wiki/${date} | sed -n '/Events\[/,/Births\[/p' | sed -n 's/^.*â€¢ //p')
	echo "${events}" | sed '1i\\'${date} > ${cache}
fi
lines=$(sed -n '2,$p' ${cache})
count=$(echo "$lines" | wc -l)
line_num=$((${RANDOM}%${count} + 1))
echo "$lines" | sed -n "${line_num}p"
